{% extends 'base.html' %}
{% block title %}Relatório de Aulas{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="logo-title">Relatório de Aulas Agendadas</div>

        <div class="card p-4 mb-4">
            <form method="get" class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Dia da Semana</label>
                    <select class="form-select" name="dia_semana">
                        <option value="">Todos</option>
                        <option {% if filtro_dia=='Segunda' %}selected{% endif %}>Segunda</option>
                        <option {% if filtro_dia=='Terça' %}selected{% endif %}>Terça</option>
                        <option {% if filtro_dia=='Quarta' %}selected{% endif %}>Quarta</option>
                        <option {% if filtro_dia=='Quinta' %}selected{% endif %}>Quinta</option>
                        <option {% if filtro_dia=='Sexta' %}selected{% endif %}>Sexta</option>
                        <option {% if filtro_dia=='Sábado' %}selected{% endif %}>Sábado</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Horário</label>
                    <input type="text" class="form-control" name="hora" value="{{ filtro_hora or '' }}" placeholder="Ex: 19:00">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Faixa</label>
                    <select class="form-select" name="faixa">
                        <option value="">Todas</option>
                        <option value="Branca" {% if filtro_faixa=='Branca' %}selected{% endif %}>Branca</option>
                        <option value="Amarela" {% if filtro_faixa=='Amarela' %}selected{% endif %}>Amarela</option>
                        <option value="Laranja" {% if filtro_faixa=='Laranja' %}selected{% endif %}>Laranja</option>
                        <option value="Jade" {% if filtro_faixa=='Jade' %}selected{% endif %}>Jade</option>
                        <option value="Verde" {% if filtro_faixa=='Verde' %}selected{% endif %}>Verde</option>
                        <option value="Roxa" {% if filtro_faixa=='Roxa' %}selected{% endif %}>Roxa</option>
                        <option value="Vermelha" {% if filtro_faixa=='Vermelha' %}selected{% endif %}>Vermelha</option>
                        <option value="Marrom Claro" {% if filtro_faixa=='Marrom Claro' %}selected{% endif %}>Marrom Claro</option>
                        <option value="Marrom Escuro" {% if filtro_faixa=='Marrom Escuro' %}selected{% endif %}>Marrom Escuro</option>
                        <option value="Preta" {% if filtro_faixa=='Preta' %}selected{% endif %}>Preta</option>
                    </select>
                </div>
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary">Filtrar</button>
                    <a href="{{ url_for('relatorio_agendamentos') }}" class="btn btn-secondary">Limpar</a>
                </div>
            </form>
        </div>

        {% if agendamentos %}
        <div class="card p-4">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Aluno</th>
                        <th>Faixa</th>
                        <th>Dia</th>
                        <th>Hora</th>
                    </tr>
                </thead>
                <tbody>
                    {% for ag in agendamentos %}
                    <tr>
                        <td>{{ ag.aluno.nome }}</td>
                        <td>{{ ag.aluno.faixa }}</td>
                        <td>{{ ag.horario.dia_semana }}</td>
                        <td>{{ ag.horario.hora }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p>Nenhum agendamento encontrado.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
